<!DOCTYPE html>
<html>

<head>
    <meta name="naver-site-verification" content="4a284e98fed2561aa72c2cafb837db9e6ef7539c" />
    <link href="https://fonts.googleapis.com/css2?family=Hi+Melody&family=Yeon+Sung&display=swap" rel="stylesheet">

    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" s integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />

    <title>내과태</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f64eb55a0222325"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light nav-distance">
        <a class="navbar-brand" href="#">과즙팡팡</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Dropdown
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                </li>
            </ul>

        </div>
    </nav>
    <selection class="hi">
        <h3 class="hellow">
            .
        </h3>
    </selection>
    <selection class="section">
        <h1 class="title">내과태</h1>
        <h2 class="subtitle container">=내가 과일로 태어난다면?</h2>
    </selection>



    <section class="d-flex justify-content-center">
        <p class="d-flex align-items-center pr-3">여자</p>
        <div>
            <input type="checkbox" id="gender">
            <label for="gender">
                <span class="knob">
                    <i></i>
                </span>
            </label>
        </div>
        <p class="d-flex align-items-center pl-3">남자</p>
    </section>


    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <div class="file-upload container">
        <div class="image-upload-wrap container">
            <input class="file-upload-input container" type="file" onchange="readURL(this);" accept="image/*" />
            <div class="drag-text">
                <h3>너의 사진을 넣어줘♥</h3>
            </div>
        </div>
        <div class="file-upload-content">
            <img class="file-upload-image" id="imagefruit" src="#" alt="your image" />
            <p class="text-center">분석중♥</p>
            <!-- <span class="result-box">분석중♥ 조금만 기다려줘</span> -->
            <p class="result-message"></p>
            <div id="label-container"></div>

            <!-- Go to www.addthis.com/dashboard to customize your tools -->
            <p class="sns">SNS 에서 환상의 짝꿍 찾으러 가기</p>
            <div class="addthis_inline_share_toolbox"></div>
            <!-- <div class="find-friend container">
                <p class="who container"></p>
                <p class="my-friend container"></p>
            </div> -->

            <div class="image-title-wrap">
                <button type="button p-2" onclick="gaReload()" class="remove-image">
                     <span class="image-title">다른 사진 넣어보기</span>
                </button>
            </div>
        </div>
    </div>

    <div id="webcam-container"></div>
    <div id="label-container"></div>
    <!-- <div id="disqus_thread"></div> -->
    <!-- <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        /*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
        (function() {
            // DON'T EDIT BELOW THIS LINE
            var d = document,
                s = d.createElement('script');
            s.src = 'https://silvermath.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script> -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-145482737-6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-145482737-6');
    </script>
    <script>
        function gaReload() {
            gtag('event', '다른 사진 넣어보기', {
                'event_category': '다른 사진 넣어보기'
            });
            window.location.reload();
        }

        function gaReload1() {
            gtag('event', '다른 사진 넣어보기 1차', {
                'event_category': '다른 사진 넣어보기'
            });
        }

        function gaReload2() {
            gtag('event', '다른 사진 넣어보기 2차', {
                'event_category': '다른 사진 넣어보기'
            });
            window.location.reload();
        }
    </script>
    <noscript>Please enable JavaScript to view the
        <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        // More API functions here:
        // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

        // the link to your model provided by Teachable Machine export panel
        let URL;
        const urlFemale = "https://teachablemachine.withgoogle.com/models/f2MET3BB3/";
        const urlMale = "https://teachablemachine.withgoogle.com/models/-Q_D7L-Wa/";
        let model, webcam, labelContainer, maxPredictions;

        // Load the image model and setup the webcam
        async function init() {
            if (document.getElementById('gender').checked) {
                URL = urlMale;
            } else {
                URL = urlFemale;
            }
            const modelURL = URL + 'model.json';
            const metadataURL = URL + 'metadata.json';

            // load the model and metadata
            // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
            // or files from your local hard drive
            // Note: the pose library adds "tmImage" object to your window (window.tmImage)
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();

            // append elements to the DOM
            labelContainer = document.getElementById('label-container');
            for (let i = 0; i < maxPredictions; i++) {
                // and class labels
                labelContainer.appendChild(document.createElement('div'));
            }
        }

        // run the webcam image through the image model
        async function predict() {
            // predict can take in an image, video or canvas html element
            var image = document.getElementById('imagefruit');
            const prediction = await model.predict(image);
            prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
            console.log(prediction[0].className);
            var resultMessage, resultBox, friend;
            if (document.getElementById("gender").checked) {
                gtag('event', '과일 테스트 수행', {
                    'event_category': '과일 테스트 수행',
                    'event_label': '남자'
                });

                switch (prediction[0].className) {
                    case 'cherry_boy':
                        resultMessage = '체리남';
                        resultBox = '당신은 달콤하면서도 상큼한 매력으로 체리와 닮았다. 귀여움과 섹시함을 동시에 갖고 있는 사기적인 캐릭터이다. 귀여우면서도 뚜렷한 이목구비를 가진 것이 특징이다. 어쩔 때는 자신도 모르게 애교를 흘리고 의외로 허당끼 있는 모습을 보이면서도 가끔은 도도하고 분위기 있는 모습으로 갭차이를 보여준다. 또한 몸에 베인 스윗함으로 상대방을 기분 좋게 만들어준다. ';
                        friend = '밝고 사랑스러운 복숭아녀'
                        gtag('event', '남자 결과 체리남', {
                            'event_category': '남자 결과'
                        })
                        break;
                    case 'strawberry_boy':
                        resultMessage = '딸기남';
                        resultBox = '올망졸망 귀여우면서도 조화로운 이목구비를 갖고 있는 당신. 베일 듯이 갸름한 턱선을 가진 것이 특징이면서도 숨겨진 앙증맞은 볼살로 반전매력을 뽐낸다. 때로는 날카롭고 차가워 보이지만 평소에는 순둥순둥 순수한 매력을 가지고 있다. 가끔 어디로 튈지 모르는 댕댕이 같은 성격과 더불어 위트있고 센스가 넘치는 당신은 주변 사람들의 인기를 한몸에 차지한다.  ';
                        friend = '차분하면서도 엉뚱한 살구녀'
                        gtag('event', '남자 결과 딸기남', {
                            'event_category': '남자 결과'
                        })
                        break;
                    case 'orange_boy':
                        resultMessage = '오렌지남';
                        resultBox = '당신은 통통튀는 매력으로 인간 비타민 같은 존재이다. 뚜렷한 이목구비에 양옆으로 길게 찢어진 큰 눈이 매력적이다. 겉으로 볼 때는 날카로워 보이는 이미지여서 다가가기 힘들지만 알고보면 엄청난 4차원 성격을 소유하고 있다. 이미지와는 다르게 순수한 매력과 더불어 비타민 같이 밝은 성격으로 재치와 센스까지 겸비하여 분위기 메이커 역할을 한다.  ';
                        friend = '시원시원한 애교쟁이 풋사과녀'
                        gtag('event', '남자 결과 오렌지남', {
                            'event_category': '남자 결과'
                        })
                        break;
                    case 'peach_boy':
                        resultMessage = '복숭아남';
                        resultBox = '뽀송뽀송 하얀피부에 핑크빛이 살짝 도는 당신은 복숭아를 닮았다. 때로는 물복(물렁한 복숭아), 때로는 딱복(딱딱한 복숭아)이 되는 온미남과 냉미남 스타일을 모두 갖고 있다. 가끔은4차원적인 매력과 동시에 복숭아처럼 스윗한 매력을 뽐내 주위 사람들을 홀리게 만든다. 환하게 웃으면 과즙이 팡 터지는 밝은 미소를 갖고 있는 사랑둥이 그 자체이다. ';
                        friend = '달콤상큼 귀여운 딸기녀'
                        gtag('event', '남자 결과 복숭아남', {
                            'event_category': '남자 결과'
                        })
                        break;
                    case 'kiwi_boy':
                        resultMessage = '골드키위남';
                        resultBox = '가만히 있어도 귀티가 흐르는 당신은 골드키위를 닮았다. 전형적인 냉미남 스타일로 차가우면서도 깨끗한 이미지를 소유하고 있다. 젠틀하며 스윗하기까지 한 당신은 완벽 그 자체이다. 차분해 보이는 성격 뒤에는 장난꾸러기 같은 모습도 조금씩 차지하고 있다. 차가운 이미지 이지만 웃는 순간 주변이 환해지는 밝은 미소를 가지고 있다.  ';
                        friend = '큐티섹시 체리녀'
                        gtag('event', '남자 결과 골드키위남', {
                            'event_category': '남자 결과'
                        })
                        break;
                    default:
                        resultMessage = '알 수 없음';
                        gtag('event', '남자 결과 알 수 없음', {
                            'event_category': '남자 결과'
                        })
                        break;
                }
            } else {
                gtag('event', '동물상 테스트 수행', {
                    'event_category': '동물상 테스트 수행',
                    'event_label': '여자'
                });
                switch (prediction[0].className) {
                    case 'cherry_girl':
                        resultMessage = '체리녀';
                        resultBox = '외적으로는 도도하고 섹시한 이미지이지만 알고 보면 귀엽고 통통 튀는 성격을 가진 다양한매력의 소유자. 차가워 보이는 첫인상에 비해 평상시에 자기도 모르게 애교를 흘리는 애교장인이다. 큐티섹시를 한몸에 가지고 있는 이기적이고 사기적인 캐릭터라고 할 수 있다. 도톰한 입술이 특징이며 레드립을 찰떡으로 소화해내어 고혹적인 분위기를 뽐낼 수 있다. ';
                        friend = '젠틀하고 스윗한 골드키위남'
                        gtag('event', '여자 결과 체리녀', {
                            'event_category': '여자 결과'
                        })
                        break;
                    case 'strawberry_girl':
                        resultMessage = '딸기녀';
                        resultBox = '당신의 도도하면서도 귀여운 듯한 매력은 달콤하면서도 상큼한 딸기와 닮았다. 뾰족하고 갸름한 턱선에 감추어진 앙증맞은 볼살이 귀여움을 더한다. 다가가기 어려워 보이지만 무언가 홀리는 매력에 인싸기질이 타고났다. 똑부러지는듯 하면서도 허당끼 있는 모습에 상대방을 푹 빠져들게 한다. 조화롭고 아름다운 이목구비로 만화에서 튀어나온 듯한 느낌이 들기도 한다. ';
                        friend = '스윗한 사랑둥이 복숭아남'
                        gtag('event', '여자 결과 딸기녀', {
                            'event_category': '여자 결과'
                        })
                        break;
                    case 'apricot_girl':
                        resultMessage = '살구녀';
                        resultBox = '깨끗한 이미지에 청순하며 분위기 갑인 당신. 오목조목 뚜렷한 이목구비에 가만히 있어도 뿜어져 나오는 따뜻한 분위기에 주변을 편안하게 만들어 준다. 겉으로는 차분해 보이지만 사실은 통통 튀는 성격에 4차원 엉뚱한 매력이 돋보인다. 애교를 부리지 않아도 존재자체가 귀여워 상대방을 심쿵하게 만든다. 의외로 웃음이 많고 털털한 반전매력도 소유하고 있다.    ';
                        friend = '센스만점 댕댕이 딸기남'
                        gtag('event', '여자 결과 살구녀', {
                            'event_category': '여자 결과'
                        })
                        break;
                    case 'peach_girl':
                        resultMessage = '복숭아녀';
                        resultBox = '복숭아처럼 투명할정도로 뽀얗고 살짝 감도는 핑크빛의 피부를 가진 당신. 귀여운 듯 뚜렷한 이목구비에 성격도 둥글둥글하고 밝은 당신은 주변에서 사랑받는 사랑둥이 그 자체이다. 몸에 베인 애교와 주변을 밝혀주는 상큼한 미소에 상대방을 기분 좋게 만들어 준다. 웃음이 많아 항상 웃고다니는 웃상이며 엉뚱하면서도 밝은 매력의 소유자이다. ';
                        friend = '큐티섹시 체리남'
                        gtag('event', '여자 결과 복숭아녀', {
                            'event_category': '여자 결과'
                        })
                        break;
                    case 'apple_girl':
                        resultMessage = '풋사과녀';
                        resultBox = '당신은 톡 쏘듯 환하게 웃는 것이 매력이다. 겉으로는 차가워 보여 다가가기 힘들지만 웃는 순간 주변이 모두 시원해지고 환해질 정도로 과즙미 넘치는 미소를 가지고 있다. 동글동글하고 시원시원한 이목구비를 가진 것이 특징이며 살짝만 웃어도 과즙이 팡 터지는 느낌을 들게 한다. 성격도 시원하고 애교도 많아서 주변 사람들에게 인기가 많다. ';
                        friend = '통통튀는 비타민 오렌지남'
                        gtag('event', '여자 결과 풋사과녀', {
                            'event_category': '여자 결과'
                        })
                        break;
                    default:
                        resultMessage = '알 수 없음';
                        gtag('event', '여자 결과 알 수 없음', {
                            'event_category': '여자 결과'
                        })
                        break;
                }
            }

            var title = "<div class='" + prediction[0].className + "-fruit-title'>" + resultMessage + "</div>"
            var explain = "<div class='fruit-explain pt-2'>" + resultBox + "</div>"
            var bestFreiend = "<div class='best-friend'>나의 환상의 짝꿍</div>"
            var friends = "<div class='" + prediction[0].className + "-fruit-friend'>" + friend + "</div>"


            $('.result-message').html(title + explain + bestFreiend + friends);
            $('.text-center').hide()



            for (let i = 0; i < maxPredictions; i++) {
                const classPrediction =
                    prediction[i].className + ': ' + prediction[i].probability.toFixed(2) * 100 + '%';
                labelContainer.childNodes[i].innerHTML = classPrediction;
            }
        }
    </script>

    <!-- <div class="drag-text">
                    <h3>너의 사진을 넣어줘♥</h3>
                </div>
            </div>  -->
    <selection class="madeby container">
        <h1 class="made-by container">made by 김매실</h1>
        <div class='youtube container'>
            <a href="https://www.youtube.com/c/조코딩JoCoding" class='youtube-link container'>제작도움 : 조코딩 유튜브</a>
        </div>
    </selection>



    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    $('.image-upload-wrap').hide();

                    $('.file-upload-image').attr('src', e.target.result);
                    $('.file-upload-content').show();


                    // $('.image-title').html(input.files[0].name);
                };

                reader.readAsDataURL(input.files[0]);
                init().then(() => {
                    console.log('hi');
                    predict();
                    // $('.find-friend').show();

                });
            } else {
                removeUpload();
            }
        }

        function removeUpload() {
            $('.file-upload-input').replaceWith($('.file-upload-input').clone());
            $('.file-upload-content').hide();
            $('.image-upload-wrap').show();
            $('.find-friend').hide();
        }
        $('.image-upload-wrap').bind('dragover', function() {
            $('.image-upload-wrap').addClass('image-dropping');
        });
        $('.image-upload-wrap').bind('dragleave', function() {
            $('.image-upload-wrap').removeClass('image-dropping');
        });
    </script>
</body>
<!-- Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

</html>
